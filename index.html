<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Subdomain Takeover Proof</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#7c3aed;--muted:#9aa4b2;color-scheme:dark}
    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    body{display:grid;place-items:center;background:linear-gradient(180deg,#071022 0%, #081426 50%, #06121b 100%);color:#e6eef8}
    .card{width:min(920px,94vw);background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;padding:28px;box-shadow:0 8px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
    .row{display:flex;gap:16px;align-items:center}
    h1{margin:0;font-size:1.6rem}
    p.lead{margin:8px 0 18px;color:var(--muted)}
    .token{margin-top:14px;padding:18px;border-radius:10px;background:rgba(255,255,255,0.02);display:flex;gap:12px;align-items:center;justify-content:space-between}
    .token .value{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:1.05rem;word-break:break-all}
    button{background:linear-gradient(90deg,var(--accent),#5b21b6);border:0;color:white;padding:10px 14px;border-radius:8px;font-weight:600;cursor:pointer}
    .meta{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px;color:var(--muted);font-size:0.92rem}
    footer{margin-top:18px;color:var(--muted);font-size:0.85rem}
    .small{font-size:0.78rem;color:var(--muted)}
    @media (max-width:520px){.row{flex-direction:column;align-items:flex-start}.token{flex-direction:column;align-items:flex-start}}
  </style>
</head>
<body>
  <main class="card" role="main">
    <div class="row">
      <div style="flex:1">
        <div style="display:flex;align-items:center;gap:12px;margin-bottom:10px">
          <div style="width:56px;height:56px;display:grid;place-items:center;border-radius:12px;background:linear-gradient(135deg,#7c3aed, #5b21b6);box-shadow:0 6px 20px rgba(92,40,200,0.18);font-weight:700;color:white;font-family:ui-monospace,Menlo,monospace">0xROI</div>
          <div>
            <h1 style="margin:0">0xROI — Subdomain takeover proof</h1>
          </div>
        </div>

        <p class="lead">This page is intended to be hosted on a taken-over subdomain to demonstrate control. It displays a unique token (from the query string) and a timestamp.</p>
        <div class="token" id="tokenBox">
          <div>
            <div class="small">Proof token</div>
            <div class="value" id="tokenValue">(no token supplied)</div>
            <div class="meta" id="meta">—</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:8px;align-items:flex-end">
            <button id="copyBtn">Copy token</button>
            <button id="refreshBtn" style="background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;color:var(--muted);font-weight:600;border-radius:8px;">Generate</button>
          </div>
        </div>

        <footer>
          <div class="small">How to use: deploy this file as <code>index.html</code> on the target subdomain. Add <code>?token=YOUR_ID</code> to the URL to show a chosen token. The page will also show a generated token and a timestamp if none is supplied.</div>
        </footer>
      </div>
      <div style="width:220px;text-align:right">
        <svg width="120" height="120" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
          <rect x="1" y="1" width="22" height="22" rx="5" stroke="url(#g)" stroke-width="1.5"/>
          <path d="M8 12h8M8 8h8M8 16h8" stroke="url(#g)" stroke-width="1.4" stroke-linecap="round"/>
          <defs>
            <linearGradient id="g" x1="0" x2="1">
              <stop offset="0" stop-color="#9f7aea"/>
              <stop offset="1" stop-color="#6d28d9"/>
            </linearGradient>
          </defs>
        </svg>
      </div>
    </div>
  </main>

  <script>
    // Utility: read token from query param 'token' or 't'
    function readTokenFromURL(){
      const u = new URL(location.href);
      return u.searchParams.get('token') || u.searchParams.get('t') || '';
    }

    function genRandomToken(len=16){
      const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      let s='';
      for(let i=0;i<len;i++) s+=chars[Math.floor(Math.random()*chars.length)];
      return s;
    }

    function updateUI(token){
      const now = new Date();
      document.getElementById('tokenValue').textContent = token;
      document.getElementById('meta').textContent = `generated: ${now.toISOString()}`;
    }

    // initial load
    let token = readTokenFromURL();
    if(!token){ token = genRandomToken(20); }
    updateUI(token);

    // copy button
    document.getElementById('copyBtn').addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(document.getElementById('tokenValue').textContent);
        document.getElementById('copyBtn').textContent = 'Copied!';
        setTimeout(()=>document.getElementById('copyBtn').textContent = 'Copy token',1200);
      }catch(e){
        alert('Copy failed — select and copy manually.');
      }
    });

    // generate new
    document.getElementById('refreshBtn').addEventListener('click', ()=>{
      const t = genRandomToken(20);
      updateUI(t);
      // update URL (without reload)
      const u = new URL(location.href);
      u.searchParams.set('token', t);
      history.replaceState({}, '', u.toString());
    });

    // friendly keyboard shortcut: press 'g' to generate
    window.addEventListener('keydown', e=>{ if(e.key==='g'){ document.getElementById('refreshBtn').click(); } });
  </script>
</body>
</html>
